@model Silicus.Ensure.Web.Models.Test.TestDetailsViewModel

@using Kendo.Mvc.UI;


<div class="row">
    <div class="col-sm-12" style="padding:20px 0px 0px 50px;">
        @if (Model.QuestionType == 1)
        {
            <p><strong style="font-size:20px;">Section 1 (Objective question)</strong></p>
            <input type="hidden" value="@Model.QuestionType" id="QuestionType" />
        }
        else
        {
            <p><strong style="font-size:20px;">Section 2 (Practical question)</strong></p>
            <input type="hidden" value="@Model.QuestionType" id="QuestionType" />
        }
        <p><strong style="font-size:15px;">Question @Model.DisplayQuestionNumber: (@Model.Marks Marks)</strong></p>
        @Html.Raw(HttpUtility.HtmlDecode(Model.QuestionDescription))
    </div>
    <div class="col-sm-12">
        <div class="btmBorder"></div>
    </div>
    <input type="hidden" value="@Model.QuestionId" id="QuestionNumber" />
    <input type="hidden" value="@Model.TestDetailId" id="UserTestDetailId" />

    <input type="hidden" value="@Model.AnswerType" id="AnswerType" />

    @if (Model.QuestionType == 1 && Model.AnswerType == 1)
    {
        if (string.IsNullOrEmpty(Model.Answer))
        {
            <div class="col-sm-12" style="padding: 20px 25px 20px 30px;">
                <ul style="list-style:none;">
                    <li>
                        <div class="radio radio-info">
                            <input type="radio" id="radio1" name="optradio" value="1">
                            <label for="radio1">@Model.Option1</label>
                        </div>
                    </li>
                    <li>
                        <div class="radio radio-info">
                            <input type="radio" id="radio2" name="optradio" value="2">
                            <label for="radio2">@Model.Option2</label>
                        </div>
                    </li>
                    <li>
                        <div class="radio radio-info">
                            <input type="radio" id="radio3" name="optradio" value="3">
                            <label for="radio3">@Model.Option3</label>
                        </div>
                    </li>
                    <li>
                        <div class="radio radio-info">
                            <input type="radio" id="radio4" name="optradio" value="4">
                            <label for="radio4">@Model.Option4</label>
                        </div>
                    </li>
                    <li>
                        <div class="radio radio-info">
                            <input type="radio" id="radio5" name="optradio" value="5">
                            <label for="radio5">@Model.Option5</label>
                        </div>
                    </li>
                    <li>
                        <div class="radio radio-info">
                            <input type="radio" id="radio6" name="optradio" value="6">
                            <label for="radio6">@Model.Option6</label>
                        </div>
                    </li>
                    <li>
                        <div class="radio radio-info">
                            <input type="radio" id="radio7" name="optradio" value="7">
                            <label for="radio7">@Model.Option7</label>
                        </div>
                    </li>
                    <li>
                        <div class="radio radio-info">
                            <input type="radio" id="radio8" name="optradio" value="8">
                            <label for="radio8">@Model.Option8</label>
                        </div>
                    </li>
                </ul>

            </div>
            <script>
                for(var i=@Model.OptionCount+1; i<=8;i++)
                {
                    $("#radio"+i).hide();
                }
            </script>
        }
        else
        {
            <div class="col-sm-12" style="padding: 20px 25px 20px 30px;">

                <ul style="list-style:none;">
                    <li>
                        <div class="radio radio-info">
                            @if (Model.Answer.Trim() == "1")
                            {
                                <input type="radio" id="radio9" name="optradio" value="1" checked="checked">
                                <label for="radio9">@Model.Option1</label>
                            }
                            else
                            {
                                <input type="radio" id="radio9" name="optradio" value="1">
                                <label for="radio9">@Model.Option1</label>
                            }

                        </div>
                    </li>
                    <li>
                        <div class="radio radio-info">
                            @if (Model.Answer.Trim() == "2")
                            {
                                <input type="radio" id="radio11" name="optradio" value="2" checked="checked">
                                <label for="radio11">@Model.Option2</label>
                            }
                            else
                            {
                                <input type="radio" id="radio11" name="optradio" value="2">
                                <label for="radio11">@Model.Option2</label>
                            }
                        </div>
                    </li>
                    <li>
                        <div class="radio radio-info">
                            @if (Model.Answer.Trim() == "3")
                            {
                                <input type="radio" id="radio13" name="optradio" value="3" checked="checked">
                                <label for="radio13">@Model.Option3</label>
                            }
                            else
                            {
                                <input type="radio" id="radio13" name="optradio" value="3">
                                <label for="radio13">@Model.Option3</label>
                            }
                        </div>
                    </li>
                    <li>
                        <div class="radio radio-info">
                            @if (Model.Answer.Trim() == "4")
                            {
                                <input type="radio" id="radio15" name="optradio" value="4" checked="checked">
                                <label for="radio15">@Model.Option4</label>
                            }
                            else
                            {
                                <input type="radio" id="radio15" name="optradio" value="4">
                                <label for="radio15">@Model.Option4</label>
                            }
                        </div>
                    </li>
                    <li>
                        <div class="radio radio-info">
                            @if (Model.Answer.Trim() == "5")
                            {
                                <input type="radio" id="radio17" name="optradio" value="5" checked="checked">
                                <label for="radio17">@Model.Option5</label>
                            }
                            else
                            {
                                <input type="radio" id="radio17" name="optradio" value="5">
                                <label for="radio17">@Model.Option5</label>
                            }
                        </div>
                    </li>
                    <li>
                        <div class="radio radio-info">
                            @if (Model.Answer.Trim() == "6")
                            {
                                <input type="radio" id="radio19" name="optradio" value="6" checked="checked">
                                <label for="radio19">@Model.Option6</label>
                            }
                            else
                            {
                                <input type="radio" id="radio19" name="optradio" value="6">
                                <label for="radio19">@Model.Option6</label>
                            }
                        </div>
                    </li>
                    <li>
                        <div class="radio radio-info">
                            @if (Model.Answer.Trim() == "7")
                            {
                                <input type="radio" id="radio21" name="optradio" value="7" checked="checked">
                                <label for="radio21">@Model.Option7</label>
                            }
                            else
                            {
                                <input type="radio" id="radio21" name="optradio" value="7">
                                <label for="radio21">@Model.Option7</label>
                            }
                        </div>
                    </li>
                    <li>
                        <div class="radio radio-info">
                            @if (Model.Answer.Trim() == "8")
                            {
                                <input type="radio" id="radio23" name="optradio" value="8" checked="checked">
                                <label for="radio23">@Model.Option8</label>
                            }
                            else
                            {
                                <input type="radio" id="radio23" name="optradio" value="8">
                                <label for="radio23">@Model.Option8</label>
                            }
                        </div>
                    </li>
                </ul>
            </div>
            <script>
                for(var i=@Model.OptionCount+1; i<=8;i++)
                {
                    $("#radio"+i).hide();
                }
            </script>
        }
    }
    else if (Model.QuestionType == 1 && Model.AnswerType == 2)
    {

        if (string.IsNullOrEmpty(Model.Answer))
        {
            <div class="col-sm-12" style="padding: 20px 25px 20px 10px;">
                <ul style="list-style:none;">
                    <li>
                        <div class="checkbox">
                            <input type="checkbox" id="checkbox1" name="optcheckbox" value="1">
                            <label for="checkbox1">@Model.Option1</label>
                        </div>
                    </li>
                    <li>
                        <div class="checkbox">
                            <input type="checkbox" id="checkbox2" name="optcheckbox" value="2">
                            <label for="checkbox2">@Model.Option2</label>
                        </div>
                    </li>
                    <li>
                        <div class="checkbox" >
                            <input type="checkbox" id="checkbox3" name="optcheckbox" value="3">
                            <label for="checkbox3">@Model.Option3</label>
                        </div>
                    </li>
                    <li>
                        <div class="checkbox" >
                            <input type="checkbox" id="checkbox4" name="optcheckbox" value="4">
                            <label for="checkbox4">@Model.Option4</label>
                        </div>
                    </li>
                    <li>
                        <div class="checkbox" >
                            <input type="checkbox" id="checkbox5" name="optcheckbox" value="5">
                            <label for="checkbox5">@Model.Option5</label>
                        </div>
                    </li>
                    <li>
                        <div class="checkbox" >
                            <input type="checkbox" id="checkbox6" name="optcheckbox" value="6">
                            <label for="checkbox6">@Model.Option6</label>
                        </div>
                    </li>
                    <li>
                        <div class="checkbox" >
                            <input type="checkbox" id="checkbox7" name="optcheckbox" value="7">
                            <label for="checkbox7">@Model.Option7</label>
                        </div>
                    </li>
                    <li>
                        <div class="checkbox" >
                            <input type="checkbox" id="checkbox8" name="optcheckbox" value="8">
                            <label for="checkbox8">@Model.Option8</label>
                        </div>
                    </li>
                </ul>
            </div>

            <script>
                for(var i=@Model.OptionCount+1; i<=8;i++)
                {
                    $("#checkbox"+i).hide();
                }
            </script>
        }
        else
        {
            <div class="col-sm-12" style="padding: 20px 25px 20px 10px;">
                <ul style="list-style:none;">
                    <li>
                        <div class="checkbox">
                            <input id="optcheckbox1" type="checkbox" name="optcheckbox" value="1">
                            <label for="optcheckbox1">@Model.Option1</label>
                        </div>
                    </li>
                    <li>
                        <div class="checkbox">
                            <input id="optcheckbox2" type="checkbox" name="optcheckbox" value="2">
                            <label for="optcheckbox2">@Model.Option2</label>
                        </div>
                    </li>
                    <li>
                        <div class="checkbox">
                            <input id="optcheckbox3" type="checkbox" name="optcheckbox" value="3">
                            <label for="optcheckbox3">@Model.Option3</label>
                        </div>
                    </li>
                    <li>
                        <div class="checkbox">
                            <input id="optcheckbox4" type="checkbox" name="optcheckbox" value="4">
                            <label for="optcheckbox4">@Model.Option4</label>
                        </div>
                    </li>
                    <li>
                        <div class="checkbox">
                            <input id="optcheckbox5" type="checkbox" name="optcheckbox" value="5">
                            <label for="optcheckbox5">@Model.Option5</label>
                        </div>
                    </li>
                    <li>
                        <div class="checkbox">
                            <input id="optcheckbox6" type="checkbox" name="optcheckbox" value="6">
                            <label for="optcheckbox6">@Model.Option6</label>
                        </div>
                    </li>
                    <li>
                        <div class="checkbox">
                            <input id="optcheckbox7" type="checkbox" name="optcheckbox" value="7">
                            <label for="optcheckbox7">@Model.Option7</label>
                        </div>
                    </li>
                    <li>
                        <div class="checkbox">
                            <input id="optcheckbox8" type="checkbox" name="optcheckbox" value="8">
                            <label for="optcheckbox8">@Model.Option8</label>
                        </div>
                    </li>
                </ul>
            </div>
            foreach (string str in Model.Answer.Split(','))
            {
                <script>
                    $('#optcheckbox'+@str).prop('checked', true);
                </script>
            }

            <script>
                for(var i=@Model.OptionCount+1; i<=8;i++)
                {
                    $("#checkbox"+i).hide();
                }
            </script>
        }
    }

    else if (Model.QuestionType == 2)
    {
        <div class="col-sm-12" style="padding: 20px 50px 30px 50px;">
            @Html.Kendo().EditorFor(m => m.Answer).Name("PracticalAnswer").Encode(true).Value(Model.Answer)
        </div>
    }

    <div class="col-sm-12">
    </div>
</div>


<div class="row">
    <div class="col-sm-12" style="margin-top:1%;padding: 0px 50px 0px 50px;">
        @if (Model.NextQuestionId != null)
        {
            @(Html.Kendo().Button()
    .Name("btnNext")
            .HtmlAttributes(new { type = "button" }).Events(e => e.Click("OnNext"))
                .Content("Next").HtmlAttributes(new { style = "float: right;", @data_id = Model.NextQuestionId, @class = "btn btn-primary" }))
        }

        @if (Model.PreviousQuestionId != null)
        {
            @(Html.Kendo().Button()
            .Name("btnPrevious")
            .HtmlAttributes(new { type = "button" }).Events(e => e.Click("OnPrevious"))
            .Content("Previous").HtmlAttributes(new { @data_id = Model.PreviousQuestionId, @class = "btn btn-primary" }))
        }
    </div>
</div>

<div class="row">
    <div class="col-sm-12" style="margin-top:1%;padding: 0px 50px 30px 50px;">
        @(Html.Kendo().Button()
    .Name("btnSubmit")
    .HtmlAttributes(new { type = "button" }).Events(e => e.Click("OnSubmitTest"))
            .Content("Submit Test").HtmlAttributes(new { style = "float: right;", @class = "btn btn-primary" }))
    </div>
</div>
@{
    var type = (Silicus.Ensure.Models.Constants.QuestionType)Model.QuestionType;
    var typeString = type.ToString().ToLower();
}
<script>
    if($('#objective-test').hasClass('active')  && "@typeString" === "objective"){
        $('#objective-test-side-bar .nav-link').parent().removeClass('active');
    }else  if($('#practical-test').hasClass('active') && "@typeString" === "practical"){
        $('#practical-test-side-bar .nav-link').parent().removeClass('active');
    }

    if($('#objective-test').hasClass('active') && "@typeString" != "objective"){
        showPracticalTest();
        $('#practical-test-side-bar .nav-link').parent().removeClass('active');
    }else  if($('#practical-test').hasClass('active') && "@typeString" != "practical"){
        showObjectiveTest();
        $('#objective-test-side-bar .nav-link').parent().removeClass('active');
    }

    $('#@Model.QuestionId').parent().addClass('active');
    updateQuestionLinkColorClass('#@Model.QuestionId','@Model.IsAnswered' == 'True', '@Model.IsViewedOnly'== 'True');
    refreshAnsweredQuestionCount();
</script>