@model Models.Employment

@using (Html.BeginForm("AddNumberOfEmployments", "Employement", FormMethod.Post, new { id = "frmNumberOfEmployments" }))
{

    <div class="form-group">
        @Html.LabelFor(m => m.NumberOfEmployments)

        <div class="form-inline">
            @Html.TextBoxFor(m => m.NumberOfEmployments, new { id = "txtNumberOfEmployments", placeholder = "Number of Employments, Including Current", @class = "form-control alphanumeric", maxlength = "2", tabindex = 1, @style = "min-width:293px !important" })
            <label class="glyphicon glyphicon-info-sign" style="width:25px;" data-toggle="tooltip" data-placement="right" title="If you are frehser then put value 0, otherwise put number of previous employments including current employment and count should not exceed 20."></label>
            @Html.ValidationMessageFor(model => model.NumberOfEmployments, "", new { @class = "text-danger", id = "valNumberOfEmployments" })
        </div>
        @if (ViewBag.NumberOfEmployments <= 0 || ViewBag.NumberOfEmployments == null)
        {
            <div class="row btnRow">
                <span class="pull-right userNote mx-1"> <i class="fa fa-certificate" aria-hidden="true"></i> Kindly add number of employments including current employment.</span>
            </div>
        }

        <div class="row btnRow">
            <a href="#" id="editNumberOfEmploymentsLink" class="mx-1 cancelText" tabindex="2"> Edit</a>
            <a href="#" id="cancelEditNumberOfEmploymentsLink" class="mx-1 cancelText hide" tabindex="2"> Cancel</a>
            <button id="addNumberOfEmployments" onclick="CheckNumberOfEmployments();" class="btn-save mx-1" tabindex="2"> Add</button>
        </div>
    </div>

}

<script type="text/javascript">
    $(document).ready(function () {
        var NumberOfEmployments = $("#txtNumberOfEmployments").val();
        if (NumberOfEmployments > 0) {
            $("#txtNumberOfEmployments").prop("disabled", true);
            $("#addNumberOfEmployments").hide();
            $("editNumberOfEmploymentsLink").show();
        } else if (NumberOfEmployments == null) {
            $("#addNumberOfEmployments").hide();
            $("#txtNumberOfEmployments").prop("disabled", false);
            $("editNumberOfEmploymentsLink").hide();
            $("#addNumberOfEmployments").text("Add");
            $("#editNumberOfEmploymentsLink").hide();
        } else if (NumberOfEmployments == '') {
            $("#editNumberOfEmploymentsLink").hide();
        }
    });

    function CheckNumberOfEmployments() {
        var caption = $("#addNumberOfEmployments").text();
        if (caption == "Edit") {
            event.preventDefault();
            $("#txtNumberOfEmployments").prop("disabled", false);
            $("#addNumberOfEmployments").text("Add");
            return false;
        }
        else {
            $("#frmNumberOfEmployments").submit();
        }
    }

    $("#editNumberOfEmploymentsLink").click(function () {
        $("#addNumberOfEmployments").show();
        $("#txtNumberOfEmployments").prop("disabled", false);
        $("#addNumberOfEmployments").text("Update");
        $("#editNumberOfEmploymentsLink").hide();
        $("#cancelEditNumberOfEmploymentsLink").removeClass("hide");
        $("#cancelEditNumberOfEmploymentsLink").show();
    });

    $("#cancelEditNumberOfEmploymentsLink").click(function () {
        $("#editNumberOfEmploymentsLink").show();
        $("#addNumberOfEmployments").hide();
        $("#cancelEditNumberOfEmploymentsLink").hide();
        $("#txtNumberOfEmployments").prop("disabled", true);
        $("#txtNumberOfEmployments").val(@ViewBag.NumberOfEmployments);
    });

</script>
