@model List<Silicus.Ensure.Models.DataObjects.Question>

@using Kendo.Mvc.UI;
@{
    ViewBag.Title = "Candidate";
    Layout = "~/Views/Shared/_Layout.cshtml";
    int i = 0;
}

<div class="main-content">

    <div>
        @if (TempData["Success"] != null)
        {
            <div class="success">
                <p style="color:green">@TempData["Success"].ToString()</p>
            </div>
        }
    </div>
    <div class="col-md-4 col-md-offset-1">

        <button type="button" class="btn btn-white" aria-label="Left Align" onclick="window.open('/Admin/CreatePDF?target=_blank')">

            <span class="glyphicon glyphicon-file" aria-hidden="true"> PDF</span>
        </button>

        <button type="submit" name="btnMail" class="btn btn-white" aria-label="Left Align" onclick="location.href='@Url.Action("SendMail", "Admin")'">
            <span class="glyphicon glyphicon-envelope" aria-hidden="true" id='mailDiv'> Mail</span>
        </button>

        <button type="button" class="btn btn-white" aria-label="Left Align">
            <span class="glyphicon glyphicon-print" aria-hidden="true" onclick="printDiv();"> Print</span>
        </button>

    </div>

    <div id="DivIdToPrint">
        @foreach (var q in Model)
        {
            i++;
            <div class="fluid mt20">
                @if (q.QuestionType == 1)
                {
                    <div class="row">
                        <div class="col-md-6">
                            <h4><span>Objective Question Set</span></h4>

                            <label for="chkQuestions">
                                <input type="checkbox" id="@Html.Raw("chkPQuestions"+i)" onclick="ViewQuestion('@Html.Raw("dvQuestions"+i)',this);" />
                            </label>
                        </div>
                    </div>
                    <div class="row">

                        <div id="@Html.Raw("dvQuestions" + i)" class="box">
                            <div class="row">
                                <div class="col-md-8" style="margin-top:30px">
                                    <strong>Question @q.Id:</strong>  &nbsp;&nbsp;
                                    @Html.Raw(q.QuestionDescription)
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-4" style="margin-top:20px">
                                    <strong>Option 1:</strong> &nbsp;&nbsp;
                                    @Html.Raw(q.Option1)
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-4" style="margin-top:20px">
                                    <strong>Option 2:</strong> &nbsp;&nbsp;
                                    @Html.Raw(q.Option2)
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-4" style="margin-top:20px">
                                    <strong>Option 3:</strong> &nbsp;&nbsp;
                                    @Html.Raw(q.Option3)
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-4" style="margin-top:20px">
                                    <strong>Option 4:</strong> &nbsp; &nbsp;
                                    @Html.Raw(q.Option4)
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6" style="margin-top:20px">
                                    <strong>Correct Answer:</strong> &nbsp;&nbsp;
                                    Option: @q.CorrectAnswer
                                </div>
                            </div>
                        </div>
                    </div>
                }
                else
                {
                    <div class="row">
                        <div class="col-md-6" style="margin-top:30px">
                            <h4><span>Practical Question Set</span></h4>
                            <label for="chkPQuestions">
                                <input type="checkbox" id="@Html.Raw("chkPQuestions"+i)" onclick="ViewQuestion('@Html.Raw("dvQuestions"+i)',this);" />
                            </label>
                        </div>
                    </div>
                    <div id="@Html.Raw("dvQuestions"+i)" class="box">
                        <div class="row">
                            <div class="col-md-9" style="margin-top:30px">
                                <strong>Question @q.Id:</strong>
                                @Html.Raw(q.QuestionDescription)
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-9" style="margin-top:30px">
                                <strong>Answer:</strong>
                                <textarea rows="5" cols="79">
                                    @HttpUtility.HtmlDecode(q.Answer)
                                </textarea>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</div>

<script>
    $(document).ready(function () {
        $(".box").hide();

    });

    function ViewQuestion(divID,chkID) {
        if ($(chkID).is(":checked")) {
            $("#" + divID).show();
        } else {
            $("#" + divID).hide();
        }
    }

    function printDiv() {
        var divToPrint = document.getElementById('DivIdToPrint');

        var newWin = window.open('', 'Print-Window');

        newWin.document.open();

        newWin.document.write('<html><body onload="window.print()">' + divToPrint.innerHTML + '</body></html>');

        newWin.document.close();

        setTimeout(function () { newWin.close(); }, 10);
    }
</script>
